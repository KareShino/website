---
import type { InferEntrySchema } from 'astro:content';
import { getCollection } from 'astro:content';

const MAX_ARTICLES = 5;
// const MAX_PROJECTS = 5;

interface Props {
  author: InferEntrySchema<'authors'>;
}

const { author } = Astro.props;
const articles = (await getCollection('blog')).filter((article) =>
  article.data.authors.includes(author.id)
).slice(0, MAX_ARTICLES);
---

<div class="profile">
  <div class="profile-image">
    <img src={author.profileImage} alt="profile image" />
  </div>
  <div class="profile-content">
    <h1>{author.name}</h1>
    <p>@{author.id}</p>
    <p>{author.bio}</p>
    <div class="social-links">
      <p>
        Twitter(X): <a href={`https://x.com/${author.social.twitter}`}>@{author.social.twitter}</a>
      </p>
      <p>
        Github: <a href={`https://github.com/${author.social.github}`}>{author.social.github}</a>
      </p>
    </div>
  </div>
  <div class="articles">
    <h2>書いた記事</h2>
    <ul>
      {
        articles.map((article) => (
          <li>
            <a href={`/blog/${article.slug}`}>{article.data.title}</a>
          </li>
        ))
      }
    </ul>
  </div>
  <div class="projects">
    <h2>作ったもの</h2>
    ...
  </div>
  <br />
  <a href="/blog/authors">一覧に戻る</a>
</div>
